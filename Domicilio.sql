CREATE TABLE DOMICILIOS(
    DOM_ID NUMBER(4) PRIMARY KEY,
    CLI_ID NUMBER(4) NOT NULL,
    MOTOR_ID NUMBER(4) NOT NULL,
    LUGAR_ORIGEN VARCHAR2(20) NOT NULL,
    LUGAR_DESTINO VARCHAR2(20) NOT NULL,
    PRECIO NUMBER(11,2) NOT NULL,
    TARIFA NUMBER(11,2) NOT NULL,
    TOTAL_PAGAR NUMBER(11,2) NOT NULL,
    CONSTRAINT DOM_CLI_FK FOREIGN KEY(CLI_ID) REFERENCES CLIENTES(CLI_ID),
    CONSTRAINT DOM_MOTOR_FK FOREIGN KEY(MOTOR_ID) REFERENCES MOTORISTAS(MOTOR_ID)
);

ALTER TABLE DOMICILIOS ADD ESTADO CHAR(1) CHECK (ESTADO IN ('P','R','E'));
ALTER TABLE DOMICILIOS ADD CONSUMIDOR_ID NUMBER(4);
ALTER TABLE DOMICILIOS ADD CONSTRAINT DOM_CONSUMIDOR_FK FOREIGN KEY(CONSUMIDOR_ID) REFERENCES CONSUMIDOR(CONSUMIDOR_ID);

SELECT * FROM DOMICILIOS;

INSERT INTO DOMICILIOS VALUES(6, 25, 2, 'CALLE 4 21-1', 'CALLE 3 2-1', 25000, 5000, 
30000, 'P', 2);
INSERT INTO DOMICILIOS VALUES(8, 46, 1, 'CALLE 6 11-5', 'CALLE5 78-2', 10000, 5000, 
15000, 'P', 5);
INSERT INTO DOMICILIOS VALUES(9, 50, 1, 'CALLE 2 10-1', 'CALLE 8 3-10', 20000, 5000, 
    25000, 'P', 8);


DELETE FROM DOMICILIOS;

CREATE TABLE CONSUMIDOR(
    CONSUMIDOR_ID NUMBER(4) PRIMARY KEY,
    NOMBRE VARCHAR2(20) NOT NULL,
    CEDULA VARCHAR2(10) NOT NULL,
    CELULAR VARCHAR2(10) NOT NULL,
    DIRECCION VARCHAR2(20) NOT NULL,
    CANT_SOLICITUDES NUMBER(2) CHECK(CANT_SOLICITUDES>0) NOT NULL,
    REGALOS NUMBER(2) CHECK(REGALOS>=0)
);

ALTER TABLE CONSUMIDOR DROP COLUMN CANT_SOLICITUDES;

SELECT * FROM CONSUMIDOR;

INSERT INTO CONSUMIDOR VALUES(2, 'MARTO', '987654321', '234567891', 'CALLE 3 2-1');
INSERT INTO CONSUMIDOR VALUES(5, 'JULIO', '123456789', '302412451', 'CALLE5 78-2');
INSERT INTO CONSUMIDOR VALUES(8, 'RODRIGO', '987654321', '234567891', 'CALLE 8 3-10');


CREATE TABLE CLIENTES(
    CLI_ID NUMBER(4) PRIMARY KEY,
    NOMBRE VARCHAR2(20) NOT NULL,
    CEDULA VARCHAR2(10) NOT NULL,
    CELULAR VARCHAR2(10) NOT NULL,
    DIRECCION VARCHAR2(20) NOT NULL,
    CANT_SOLICITUDES NUMBER(2) CHECK(CANT_SOLICITUDES>0) NOT NULL,
    REGALOS NUMBER(2) CHECK(REGALOS>=0)
);


SELECT * FROM CLIENTES;

INSERT INTO CLIENTES VALUES(25, 'JUAN', '987654321', '12345678', 'CALLE 4 21-1', 
5, 0);
INSERT INTO CLIENTES VALUES(46, 'SAN', '123456789', '87654321', 'CALLE 6 11-5', 
15, 1);
INSERT INTO CLIENTES VALUES(50, 'ALEX', '987654321', '542141562', 'CALLE 2 10-1', 
23, 2);

CREATE TABLE MOTORISTAS(
    MOTOR_ID NUMBER(4) PRIMARY KEY,
    NOMBRE VARCHAR2(20) NOT NULL,
    CEDULA VARCHAR2(10) NOT NULL,
    CELULAR VARCHAR2(10) NOT NULL,
    MODELO_MOTO VARCHAR2(10),
    PLACA_MOTO VARCHAR2(6) NOT NULL
);

SELECT * FROM MOTORISTAS;

INSERT INTO MOTORISTAS VALUES(1, 'DIEGO', '987654321', '12345678', 'HONDA', 
'ABC123');
INSERT INTO MOTORISTAS VALUES(2, 'CALDERON', '987654321', '12345678', 'AKT', 
'XYZ123');
INSERT INTO MOTORISTAS VALUES(3, 'DIEGO', '987654321', '12345678', 'BMW', 
'DEF123');

CREATE TABLE COMISION(
    DOM_ID NUMBER(4) NOT NULL,
    COM_MOTOR NUMBER(11,2) NOT NULL,
    COM_CENTRAL NUMBER(11,2) NOT NULL,
    CONSTRAINT COM_DOM_FK FOREIGN KEY(DOM_ID) REFERENCES DOMICILIOS(DOM_ID)
);

SELECT * FROM COMISION;

INSERT INTO MOTORISTAS VALUES(1, 'DIEGO', '987654321', '12345678', 'HONDA', 
'ABC123');
INSERT INTO MOTORISTAS VALUES(1, 'DIEGO', '987654321', '12345678', 'HONDA', 
'ABC123');


